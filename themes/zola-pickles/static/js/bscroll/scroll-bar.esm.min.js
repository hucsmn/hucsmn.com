/*!
 * better-scroll / scroll-bar
 * (c) 2016-2021 ustbhuangyi
 * Released under the MIT License.
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var __assign=function(){return(__assign=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var s in e=arguments[o])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};function __spreadArrays(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var r=Array(t),s=0;for(e=0;e<o;e++)for(var i=arguments[e],n=0,a=i.length;n<a;n++,s++)r[s]=i[n];return r}function warn(t){console.error("[BScroll warn]: "+t)}var inBrowser="undefined"!=typeof window,ua=inBrowser&&navigator.userAgent.toLowerCase(),isWeChatDevTools=!(!ua||!/wechatdevtools/.test(ua)),isAndroid=ua&&ua.indexOf("android")>0,isIOSBadVersion=function(){if("string"==typeof ua){var t=/os (\d\d?_\d(_\d)?)/.exec(ua);if(!t)return!1;var e=t[1].split("_").map((function(t){return parseInt(t,10)}));return!!(13===e[0]&&e[1]>=4)}return!1}(),supportsPassive=!1;if(inBrowser){var EventName="test-passive";try{var opts={};Object.defineProperty(opts,"passive",{get:function(){supportsPassive=!0}}),window.addEventListener(EventName,(function(){}),opts)}catch(t){}}function getNow(){return window.performance&&window.performance.now&&window.performance.timing?window.performance.now()+window.performance.timing.navigationStart:+new Date}var extend=function(t,e){for(var o in e)t[o]=e[o];return t};function between(t,e,o){return t<e?e:t>o?o:t}var elementStyle=inBrowser&&document.createElement("div").style,vendor=function(){if(!inBrowser)return!1;for(var t=0,e=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}];t<e.length;t++){var o=e[t];if(void 0!==elementStyle[o.value])return o.key}return!1}();function prefixStyle(t){return!1===vendor?t:"standard"===vendor?"transitionEnd"===t?"transitionend":t:vendor+t.charAt(0).toUpperCase()+t.substr(1)}function addEvent(t,e,o,r){var s=supportsPassive?{passive:!1,capture:!!r}:!!r;t.addEventListener(e,o,s)}function removeEvent(t,e,o,r){t.removeEventListener(e,o,{capture:!!r})}var cssVendor=vendor&&"standard"!==vendor?"-"+vendor.toLowerCase()+"-":"",transform=prefixStyle("transform"),transition=prefixStyle("transition"),hasPerspective=inBrowser&&prefixStyle("perspective")in elementStyle,style={transform:transform,transition:transition,transitionTimingFunction:prefixStyle("transitionTimingFunction"),transitionDuration:prefixStyle("transitionDuration"),transitionDelay:prefixStyle("transitionDelay"),transformOrigin:prefixStyle("transformOrigin"),transitionEnd:prefixStyle("transitionEnd"),transitionProperty:prefixStyle("transitionProperty")},EventEmitter=function(){function t(t){this.events={},this.eventTypes={},this.registerType(t)}return t.prototype.on=function(t,e,o){return void 0===o&&(o=this),this.hasType(t),this.events[t]||(this.events[t]=[]),this.events[t].push([e,o]),this},t.prototype.once=function(t,e,o){var r=this;void 0===o&&(o=this),this.hasType(t);var s=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];r.off(t,s);var a=e.apply(o,i);if(!0===a)return a};return s.fn=e,this.on(t,s),this},t.prototype.off=function(t,e){if(!t&&!e)return this.events={},this;if(t){if(this.hasType(t),!e)return this.events[t]=[],this;var o=this.events[t];if(!o)return this;for(var r=o.length;r--;)(o[r][0]===e||o[r][0]&&o[r][0].fn===e)&&o.splice(r,1);return this}},t.prototype.trigger=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];this.hasType(t);var r=this.events[t];if(r)for(var s,i=r.length,n=__spreadArrays(r),a=0;a<i;a++){var l=n[a],h=l[0],c=l[1];if(h&&!0===(s=h.apply(c,e)))return s}},t.prototype.registerType=function(t){var e=this;t.forEach((function(t){e.eventTypes[t]=t}))},t.prototype.destroy=function(){this.events={},this.eventTypes={}},t.prototype.hasType=function(t){var e=this.eventTypes;e[t]===t||warn('EventEmitter has used unknown event type: "'+t+'", should be oneof ['+Object.keys(e).map((function(t){return JSON.stringify(t)}))+"]")},t}(),EventRegister=function(){function t(t,e){this.wrapper=t,this.events=e,this.addDOMEvents()}return t.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},t.prototype.addDOMEvents=function(){this.handleDOMEvents(addEvent)},t.prototype.removeDOMEvents=function(){this.handleDOMEvents(removeEvent)},t.prototype.handleDOMEvents=function(t){var e=this,o=this.wrapper;this.events.forEach((function(r){t(o,r.name,e,!!r.capture)}))},t.prototype.handleEvent=function(t){var e=t.type;this.events.some((function(o){return o.name===e&&(o.handler(t),!0)}))},t}(),EventHandler=function(){function t(t,e){this.indicator=t,this.options=e,this.hooks=new EventEmitter(["touchStart","touchMove","touchEnd"]),this.registerEvents()}return t.prototype.registerEvents=function(){var t=this.options,e=t.disableMouse,o=t.disableTouch,r=[],s=[],i=[];e||(r.push({name:"mousedown",handler:this.start.bind(this)}),s.push({name:"mousemove",handler:this.move.bind(this)}),i.push({name:"mouseup",handler:this.end.bind(this)})),o||(r.push({name:"touchstart",handler:this.start.bind(this)}),s.push({name:"touchmove",handler:this.move.bind(this)}),i.push({name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),this.startEventRegister=new EventRegister(this.indicator.indicatorEl,r),this.moveEventRegister=new EventRegister(window,s),this.endEventRegister=new EventRegister(window,i)},t.prototype.BScrollIsDisabled=function(){return!this.indicator.scroll.enabled},t.prototype.start=function(t){if(!this.BScrollIsDisabled()){var e=t.touches?t.touches[0]:t;t.preventDefault(),t.stopPropagation(),this.initiated=!0,this.lastPoint=e[this.indicator.keysMap.point],this.hooks.trigger(this.hooks.eventTypes.touchStart)}},t.prototype.move=function(t){if(this.initiated){var e=(t.touches?t.touches[0]:t)[this.indicator.keysMap.point];t.preventDefault(),t.stopPropagation();var o=e-this.lastPoint;this.lastPoint=e,this.hooks.trigger(this.hooks.eventTypes.touchMove,o)}},t.prototype.end=function(t){this.initiated&&(this.initiated=!1,t.preventDefault(),t.stopPropagation(),this.hooks.trigger(this.hooks.eventTypes.touchEnd))},t.prototype.destroy=function(){this.startEventRegister.destroy(),this.moveEventRegister.destroy(),this.endEventRegister.destroy()},t}(),Indicator=function(){function t(t,e){this.scroll=t,this.options=e,this.hooksFn=[],this.wrapper=e.wrapper,this.direction=e.direction,this.indicatorEl=this.wrapper.children[0],this.keysMap=this.getKeysMap(),this.handleFade(),this.handleHooks()}return t.prototype.handleFade=function(){this.options.fade&&(this.wrapper.style.opacity="0")},t.prototype.handleHooks=function(){var t=this,e=this.options,o=e.fade,r=e.interactive,s=e.scrollbarTrackClickable,i=this.scroll,n=i.hooks,a=i.scroller.translater.hooks,l=i.scroller.animater.hooks;if(this.registerHooks(n,n.eventTypes.refresh,this.refresh),this.registerHooks(a,a.eventTypes.translate,(function(e){var o=t.keysMap.hasScroll;t.scroll[o]&&t.updatePosition(e)})),this.registerHooks(l,l.eventTypes.time,this.transitionTime),this.registerHooks(l,l.eventTypes.timeFunction,this.transitionTimingFunction),o&&(this.registerHooks(i,i.eventTypes.scrollEnd,(function(){t.fade()})),this.registerHooks(i,i.eventTypes.scrollStart,(function(){t.fade(!0)})),i.eventTypes.mousewheelStart&&i.eventTypes.mousewheelEnd&&(this.registerHooks(i,i.eventTypes.mousewheelStart,(function(){t.fade(!0)})),this.registerHooks(i,i.eventTypes.mousewheelMove,(function(){t.fade(!0)})),this.registerHooks(i,i.eventTypes.mousewheelEnd,(function(){t.fade()})))),r){var h=this.scroll.options,c=h.disableMouse,p=h.disableTouch;this.eventHandler=new EventHandler(this,{disableMouse:c,disableTouch:p});var d=this.eventHandler.hooks;this.registerHooks(d,d.eventTypes.touchStart,this.startHandler),this.registerHooks(d,d.eventTypes.touchMove,this.moveHandler),this.registerHooks(d,d.eventTypes.touchEnd,this.endHandler)}s&&this.bindClick()},t.prototype.registerHooks=function(t,e,o){t.on(e,o,this),this.hooksFn.push([t,e,o])},t.prototype.bindClick=function(){var t=this.wrapper;this.clickEventRegister=new EventRegister(t,[{name:"click",handler:this.handleClick.bind(this)}])},t.prototype.handleClick=function(t){var e=this.calculateclickOffsetPos(t),o=this.scroll,r=o.x,s=o.y;r="horizontal"===this.direction?e:r,s="vertical"===this.direction?e:s,this.scroll.scrollTo(r,s,this.options.scrollbarTrackOffsetTime)},t.prototype.calculateclickOffsetPos=function(t){var e=this.keysMap,o=e.point,r=e.domRect,s=this.options.scrollbarTrackOffsetType,i=t[o]-this.wrapperRect[r],n=i<this.currentPos?-1:1,a=0,l=this.currentPos;return"step"===s?a=this.scrollInfo.baseSize*n:(a=0,l=i),this.newPos(l,a,this.scrollInfo)},t.prototype.getKeysMap=function(){return"vertical"===this.direction?{hasScroll:"hasVerticalScroll",size:"height",wrapperSize:"clientHeight",scrollerSize:"scrollerHeight",maxScrollPos:"maxScrollY",pos:"y",point:"pageY",translateProperty:"translateY",domRect:"top"}:{hasScroll:"hasHorizontalScroll",size:"width",wrapperSize:"clientWidth",scrollerSize:"scrollerWidth",maxScrollPos:"maxScrollX",pos:"x",point:"pageX",translateProperty:"translateX",domRect:"left"}},t.prototype.fade=function(t){var e=t?250:500,o=this.wrapper;o.style[style.transitionDuration]=e+"ms",o.style.opacity=t?"1":"0"},t.prototype.refresh=function(){var t=this.keysMap.hasScroll,e=this.scroll,o=e.x,r=e.y;if(this.wrapperRect=this.wrapper.getBoundingClientRect(),this.canScroll(e[t])){var s=this.keysMap,i=s.wrapperSize,n=s.scrollerSize,a=s.maxScrollPos;this.scrollInfo=this.refreshScrollInfo(this.wrapper[i],e[n],e[a],this.indicatorEl[i]),this.updatePosition({x:o,y:r})}},t.prototype.transitionTime=function(t){void 0===t&&(t=0),this.indicatorEl.style[style.transitionDuration]=t+"ms"},t.prototype.transitionTimingFunction=function(t){this.indicatorEl.style[style.transitionTimingFunction]=t},t.prototype.canScroll=function(t){return this.wrapper.style.display=t?"block":"none",t},t.prototype.refreshScrollInfo=function(t,e,o,r){var s=Math.max(Math.round(t*t/(e||t||1)),this.options.minSize);this.options.isCustom&&(s=r);var i=t-s;return{baseSize:s,maxScrollPos:i,minScrollPos:0,sizeRatio:i/o}},t.prototype.updatePosition=function(t){var e=this.caculatePosAndSize(t,this.scrollInfo),o=e.pos,r=e.size;this.refreshStyle(r,o),this.currentPos=o},t.prototype.caculatePosAndSize=function(t,e){var o,r=this.keysMap.pos,s=e.sizeRatio,i=e.baseSize,n=e.maxScrollPos,a=e.minScrollPos,l=this.options.minSize,h=Math.round(s*t[r]);return h<a?(o=Math.max(i+3*h,l),h=a):h>n?h=n+i-(o=Math.max(i-3*(h-n),l)):o=i,{pos:h,size:o}},t.prototype.refreshStyle=function(t,e){var o=this.keysMap,r=o.translateProperty,s=o.size,i=this.scroll.options.translateZ;this.indicatorEl.style[s]=t+"px",this.indicatorEl.style[style.transform]=r+"("+e+"px)"+i},t.prototype.startHandler=function(){this.moved=!1,this.startTime=getNow(),this.transitionTime(),this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.beforeScrollStart)},t.prototype.moveHandler=function(t){if(this.moved||this.indicatorNotMoved(t)||(this.moved=!0,this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollStart)),this.moved){var e=this.newPos(this.currentPos,t,this.scrollInfo);this.syncBScroll(e)}},t.prototype.endHandler=function(){if(this.moved){var t=this.scroll,e=t.x,o=t.y;this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollEnd,{x:e,y:o})}},t.prototype.indicatorNotMoved=function(t){var e=this.currentPos,o=this.scrollInfo,r=o.maxScrollPos;return e===o.minScrollPos&&t<=0||e===r&&t>=0},t.prototype.syncBScroll=function(t){var e=getNow(),o=this.scroll,r=o.x,s=o.y,i=o.options,n=o.scroller,a=o.maxScrollY,l=o.minScrollY,h=o.maxScrollX,c=o.minScrollX,p=i.probeType,d=i.momentumLimitTime,u={x:r,y:s};"vertical"===this.direction?u.y=between(t,a,l):u.x=between(t,h,c),n.translater.translate(u),e-this.startTime>d&&(this.startTime=e,1===p&&n.hooks.trigger(n.hooks.eventTypes.scroll,u)),p>1&&n.hooks.trigger(n.hooks.eventTypes.scroll,u)},t.prototype.newPos=function(t,e,o){var r=o.maxScrollPos,s=o.sizeRatio,i=t+e;return i=between(i,o.minScrollPos,r),Math.round(i/s)},t.prototype.destroy=function(){var t=this.options,e=t.interactive,o=t.scrollbarTrackClickable,r=t.isCustom;e&&this.eventHandler.destroy(),o&&this.clickEventRegister.destroy(),r||this.wrapper.parentNode.removeChild(this.wrapper),this.hooksFn.forEach((function(t){var e=t[0],o=t[1],r=t[2];e.off(o,r)})),this.hooksFn.length=0},t}(),ScrollBar=function(){function t(t){this.scroll=t,this.handleOptions(),this.createIndicators(),this.handleHooks()}return t.prototype.handleHooks=function(){var t=this,e=this.scroll;e.hooks.on(e.hooks.eventTypes.destroy,(function(){for(var e=0,o=t.indicators;e<o.length;e++){o[e].destroy()}}))},t.prototype.handleOptions=function(){var t=!0===this.scroll.options.scrollbar?{}:this.scroll.options.scrollbar;this.options=extend({fade:!0,interactive:!1,customElements:[],minSize:8,scrollbarTrackClickable:!1,scrollbarTrackOffsetType:"step",scrollbarTrackOffsetTime:300},t)},t.prototype.createIndicators=function(){for(var t,e=this.scroll,o=[],r=["scrollX","scrollY"],s=["horizontal","vertical"],i=this.options.customElements,n=0;n<r.length;n++){var a=r[n];if(e.options[a]){var l=i.shift(),h=s[n],c=!1,p=l||this.createScrollbarElement(h);p!==l?e.wrapper.appendChild(p):c=!0,t=__assign(__assign({wrapper:p,direction:h},this.options),{isCustom:c}),o.push(new Indicator(e,t))}}this.indicators=o},t.prototype.createScrollbarElement=function(t,e){void 0===e&&(e=this.options.scrollbarTrackClickable);var o=document.createElement("div"),r=document.createElement("div");return o.style.cssText="position:absolute;z-index:9999;overflow:hidden;",r.style.cssText="box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px;",r.className="bscroll-indicator","horizontal"===t?(o.style.cssText+="height:7px;left:2px;right:2px;bottom:0;",r.style.height="100%",o.className="bscroll-horizontal-scrollbar"):(o.style.cssText+="width:7px;bottom:2px;top:2px;right:1px;",r.style.width="100%",o.className="bscroll-vertical-scrollbar"),e||(o.style.cssText+="pointer-events:none;"),o.appendChild(r),o},t.pluginName="scrollbar",t}();export default ScrollBar;